# Architecture of Forms

- [investigation needed] avoid some `autocomplete` values for information that is not about yourself, but about others
- use autocomplete when appropriate for the following fields:
  - `given-names`
  - ...
- support HTML input types:
  - `text`
  - `email`
  - ...
- submit button busy indicator
  - visual indicator
  - `aria-busy`
    - enable on submission start
    - disable on submission end or failure
- error messages
  - content design: direction, solution
  - aria-describedby
  - color
- use HTML validation for server side rendering (SSR)
  - `min`
  - `max`
  - `step`
  - `minLength`
  - `maxLength`
  - `pattern`
  - `required`
- submit with onsubmit inline validate
  - validation message associated with submit button
- submit with no validation to save progress
- submit with no validation when pressing back button
- submit by browser `application/x-www-form-urlencoded`
  - display validation error summary (alert?)
  - display ssr rendered validation messages associated with form fields
- submit using JavaScript
- JavaScript validation logic
  - `minLength` resulting in `tooShort`
  - `maxLength` resulting in `tooLong`
  - `pattern` resulting in `patternMismatch`
  - `required` resulting in `valueMissing`
  - `min` resulting in `rangeUnderflow`
  - `max` resulting in `rangeOverflow`
  - `step` resulting in `stepMismatch`
- multistep form
  - display step number and description in `<title>`
  - questionnaire with `h1` as label with `aria-labelledby`
- validation rules should not prevent users from correctly filling out a form
  - in forms for Dutch citizens, use the maximum length from GBA (Gemeentelijke Basisadministratie) for `maxLength` (or allow even longer values), so every Dutch citizen can fill out the form correctly with complete values.
- for forms with certain lawful or financial implications, display a summary and allow the user to check and correct the form before submission has consequences.
  - summary can display various data types:
    - text
    - multiline text
    - checkbox: "yes"/"no" or other labels
    - date
    - time
    - datetime
    - URL / email
    - number (with number formatting)
    - numeric with pluralization
- resume editing a form in a partially completed and partially invalid state
  - display (some) validation messages immediately when opening the form (without `aria-live`)
  - fill out and pre-select saved values in form field
- reset the form to a pristine state
  - disable reset button when form is pristine
  - restore values (initial or default values)
  - restore validation state
  - reset a resumed form to initial values (of the pristine form, not the values of when the form was resumed)
- defer validation for improved usability
  - validate required fields after submitting the form
- great error messages
  - name of field is mentioned in error message
  - localization of error messages
    - `tooShort`
    - `tooLong`
    - `patternMismatch`
    - `valueMissing`
    - `rangeUnderflow`
    - `rangeOverflow`
    - `stepMismatch`
  - parameters for error message
    - `tooShort` has access to `valueLength` and `minLength`
    - `tooLong` has access to `valueLength` and `maxLength`
    - `rangeUnderflow` has access to `value` and `min`
    - `rangeOverflow` has access to `value` and `max`
